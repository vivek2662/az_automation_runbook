# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
  branches:
    include:
      - main

variables:
  azureServiceConnection: 'github.com_vivek2662'
  devResourceGroup: 'ADF_DEV_TEST_1'
  devAutomationAccount: 'Venkat-AZ-Test-runbook'
  #preprodResourceGroup: ''
  #preprodAutomationAccount: ''
  runbookName: 'Runbook.ps1'
  runbookFolder: 'Runbooks'
  artifactName: 'runbookArtifact'
  location: 'East US'
  devRunbookName: 'runbook_dev'
  preprodRunbookName: 'runbook_pre_prod'

  #Build stages:
stages:
  - stage: Build
    displayName: 'Building Runbook'
    jobs:
      - job: BuildRunbook
        displayName: 'Creating artifact'
        pool:
          vmImage: 'windows-latest'
        steps:
          - task: PublishBuildArtifacts@1
            displayName: 'Publish Build artifact'
            inputs:
              PathtoPublish: '$(Build.ArtifactStagingDirectory)'
              ArtifactName: 'drop'
              publishLocation: 'Container'
    

